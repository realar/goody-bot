{% extends "base.html" %}
{% block content %}
<div class="company-details">
    <a class="back-btn" href="{{ url_for('webapp.webapp_page') }}">← Назад к каталогу</a>
    <div class="company-images" id="company-carousel">
        {% for image in company.images %}
        <a href="{{ image }}" data-lg-size="1600-1067" data-lg="true">
            <img src="{{ image }}" alt="Изображение компании {{ company.name }}">
        </a>
        {% endfor %}
    </div>
    <h2>{{ company.name }}</h2>
    <p>{{ company.description }}</p>

    {% if company.admin %}
    <div class="contact-admin">
        <a href="https://t.me/{{ company.admin }}?text=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%D1%82%D0%B5!%20%D0%9C%D0%B5%D0%BD%D1%8F%20%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B5%D1%81%D1%83%D0%B5%D1%82%20%D0%B0%D0%B2%D1%82%D0%BE%20%D0%B8%D0%B7%20 " 
           target="_blank" 
           class="contact-btn">
           Связаться с администратором
        </a>
    </div>
    {% else %}
    <p class="no-admin">Контакт администратора недоступен.</p>
    {% endif %}
</div>

<!-- Подключение стилей Lightbox -->
<link href="https://cdn.jsdelivr.net/npm/lightgallery/css/lightgallery-bundle.min.css" rel="stylesheet">

<!-- Подключение JavaScript Lightbox -->
<script src="https://cdn.jsdelivr.net/npm/lightgallery/lightgallery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery/plugins/thumbnail/lg-thumbnail.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery/plugins/zoom/lg-zoom.min.js"></script>

<script>
    // Инициализация карусели с поддержкой полноэкранного просмотра
    document.addEventListener('DOMContentLoaded', () => {
        lightGallery(document.getElementById('company-carousel'), {
            thumbnail: true,
            zoom: true,
            download: false,
            actualSize: false
        });
    });
</script>

<style>
    .back-btn {
        font-size: 16px;
        color: #617EFF;
        text-decoration: none;
        margin-bottom: 15px;
        display: inline-block;
    }

    .company-details {
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
    }

    .company-details h2 {
        margin-bottom: 10px;
    }

    .company-details p {
        font-size: 14px;
        color: #555;
    }

    .company-images {
        display: flex;
        overflow-x: auto;
        gap: 10px;
        padding: 10px 0;
    }

    .company-images img {
        height: 150px; /* Устанавливаем фиксированную высоту */
        width: auto; /* Ширина будет автоматически подстраиваться */
        border-radius: 5px;
        cursor: pointer;
        transition: transform 0.3s;
        object-fit: cover; /* Заполняет контейнер с сохранением пропорций */
    }

    .company-images img:hover {
        transform: scale(1.1);
    }

    .company-images a {
        text-decoration: none;
    }

    .contact-admin {
        margin-top: 20px;
    }

    .contact-btn {
        display: inline-block;
        background-color: #617EFF;
        color: white;
        padding: 10px 15px;
        border-radius: 5px;
        text-decoration: none;
        font-size: 14px;
        font-weight: bold;
    }

    .contact-btn:hover {
        background-color: #506cd5;
    }

    .no-admin {
        font-size: 14px;
        color: #888;
        margin-top: 20px;
    }
</style>
{% endblock %}
